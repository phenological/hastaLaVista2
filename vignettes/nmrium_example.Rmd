---
title: "R Notebook"
output: html_notebook
---

This is an [R Markdown](http://rmarkdown.rstudio.com) Notebook. When you execute code within the notebook, the results appear beneath the code. 

Try executing this chunk by clicking the *Run* button within the chunk or by placing your cursor inside it and pressing *Cmd+Shift+Enter*. 

```{r}
library(gsignal)
library(ggplot2)
library(patchwork)
library(RColorBrewer)
library(colorRamps)
library(zeallot)
library(minpack.lm)
library(jsonlite)

devtools::load_all(Sys.getenv("FUSION"))
#devtools::load_all(Sys.getenv("NSP"))
library(nmr.spectra.processing)
nsq <- Sys.getenv("NMR_PEAK_FITTING")

source(file.path(nsq,"R","signalShapes.R"))
source(file.path(nsq,"R","fitModel.R"))

modelFunctions1 <- new.env()


#source(file.path(nsq,"R","parametrizationBySignals.R"), local = modelFunctions1)
source(file.path(nsq,"R","parametrizationBySignalsChangeFWHM.R"), local = modelFunctions1)
source(file.path(nsq,"R","modelError.R"), local = modelFunctions1)
source(file.path(nsq,"R","referenceSignalModel.R"))

exp_description <- "nblc"
#source('referenceSignalModel.R')
```

Add a new chunk by clicking the *Insert Chunk* button on the toolbar or by pressing *Cmd+Option+I*.

When you save the notebook, an HTML file containing the code and output will be saved alongside it (click the *Preview* button or press *Cmd+Shift+K* to preview the HTML file). 

The preview shows you a rendered HTML copy of the contents of the editor. Consequently, unlike *Knit*, *Preview* does not run any R code chunks. Instead, the output of the chunk when it was last run in the editor is displayed.

```{r}
dataPath <- Sys.getenv("DATA")

nmrPath<- file.path(dataPath, "external_ileum_ILE_EXTr10_PROF.URINE.NOESY.Duodenum.230522.daE")
load(nmrPath)
nmr10 <- external_ileum_ILE_EXTr10_PROF.URINE.NOESY.Duodenum.230522
rm(external_ileum_ILE_EXTr10_PROF.URINE.NOESY.Duodenum.230522)
freq10 <- nmr10@obsDescr[[1]]$a_SFO1[[1]]
ppm <- unname(as.numeric(nmr10@varName)) #- BIG_SHIFT#ppm is the same for the three daE
matriz[[1]] <- unname(nmr10@.Data)
sampleID[[1]] <- substring(nmr10@obsDescr[[1]]$sampleID, 31)
metas[[1]] <- nmr10@obsDescr[[1]]
```
